///Coded by Tareq Albeesh
#include <bits/stdc++.h>
using namespace std;


///Strongly Connected Components Kosaraju's Algorithm

/// if C is a scc source
/// and C` is a scc sink
/// if we started a DFS from the source the last item we will add to the stack will
/// be a C element and the same if we started from C`
/// so always the C (source) component will be added lastely to the stack
/// if we take the head of the stack and did a DFS on it it will give use C and C` because
/// C is source
/// so we need a way to make the Source a sink and vice versa
/// so we always check the sinks first



void DFS(vector < vector <int> > &V,
         stack <int> &s,
         vector <bool> &Visited,
         int curr
         )
{
    if(Visited[curr])
        {return;}

    Visited[curr] = 1;
    for(int i=0;i<V[curr].size();i++)
    {
        DFS(V,s,Visited,V[curr][i]);
    }
    s.push(curr);

}
void DFS2(vector < vector <int> > &V,
         vector <bool> &Visited,
         int curr,
         vector <int> &temp
         )
{
    if(Visited[curr])
        return;

    Visited[curr] = 1;
    temp.push_back(curr);
    for(int i=0;i<V[curr].size();i++)
    {
        DFS2(V,Visited,V[curr][i],temp);
    }
    //s.push(curr);

}
vector < vector <int> > SCC_Kosaraju_Algorithm(vector < vector <int> > V,
                            vector < vector <int> > V2

                            )
{
    stack <int> s;
    vector <bool> Visited(V.size()+1);
    fill(Visited.begin(),Visited.end(),0);

    for(int i=1;i<V.size();i++)
    {
        if(!Visited[i])
        {
            DFS(V,s,Visited,i);
        }
    }


    fill(Visited.begin(),Visited.end(),0);

    vector < vector<int> > VV;
    while(!s.empty())
    {
        vector<int> temp;

        int curr = s.top();
        s.pop();
        if(!Visited[curr])
        {
        DFS2(V2,Visited,curr,temp);
        VV.push_back(temp);
        }

    }
return VV;

}

void print_vector(vector < vector <int> > &V)
{
    for(int i=0;i<V.size();i++)
    {
        for(int j=0;j<V[i].size();j++)
        {
            cout << V[i][j] << " ";
        }
        cout << endl;
    }
}

main()
{

int n,m,x,y;
cin >> n  >> m ;

vector < vector <int> > V(n+1) ;
vector < vector <int> > RV(n+1);

for(int i=0;i<m;i++)
{
cin  >> x >> y;

V[x].push_back(y);
RV[y].push_back(x);

}

vector < vector <int> > VV= SCC_Kosaraju_Algorithm(V,RV);
//cout << VV.size();
print_vector(VV);



}




/*
                                   `,;*########+*:.
                               `,*##+i::,,,,,:::;*##+,
                            `:+#+**:,,,,,,,,,:**:,,,;+#;
                          .*#*:,+nni,,,,,,,,,;z#:,,,,,:*#.
                        :#+;,,,,*#*:,,,,,,,,,,::,,,,,,,,:#;
                      ;#*:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,:+*
                    :#*:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,+*
                  ,zn;,,,,,,,,,,,,,,,,,,:ii:,,,,,,,,,,,,,,,,+*
                `*xnz;,,,,,,,,,,,,,,,,,:#nn+,,,,,,,,;i,,,,,,,+;
               ,#i##;,,,,,:i*i:,,,,,,,,:+#+:,,,,,,,:zz;,,,,,,:z,
              i#:,,,,,,,,:#nnz:,,,,,,,,,,:,,,,,,,,,:+*:,,,,,,,:z`
            `#i,,,,,,,,,,;znzi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,i*
           .#;,,,,,,,,,,,,;;:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,#.
          ,#:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,;+
         :#:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,#`
        :#:,,,,::,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ii
       ,+:,,,,;#+,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,:#
      .n;,,,,:#n#,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,z`
     `nn;,,,,;z#:,,,,,,,:;*+#*:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,#,
     +n#:,,,,,;:,,,,,,;+z#*;::,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,*;
    :+i:,,,,,,,,,,,,;##;,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,;i                                                                             `;;:
   `#:,,,,,,,,,,,,:+#;,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,;*                                                                          `:++;,i,
   ii,,,,,,,,,,,,:z*,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,:+                                                                    `.,;*+#*:,,,:*
  `#,,,,,,,,,,,,;z;,,,,,,,,,,,:;ii,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,:+                                                             .:;*++##+*i::,,,,,,,+
  ii,,,,,,,,,,,:z:,,,,,,,,:i#zz#*;,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,;*                                                        .;*##+*i:::,,,,,,,,,,,,,,+
  #,,,,,,,,,,,:z;,,,,,,,;#z+;:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,;*                                                     `i#+i:,,,,,,,,,,,,,,,,,,,,,:*
 .+,,,,**,,,,,+i,,,,,,:##;,,,,,,,,,,,,,,,,:::,,,,,,,,,,,,,,,,,,,,,ii                                                   `*#;:,,,,,,,,,,,,,,,,,,,,,,,:;;
 *;,,,inz:,,,:#,,,,,,*z;,,,,,,,,,,,,,,:i#zz#i,,,,,,,,,,,,,,,,,,,,,+,                                                  .#;,,,,,,,,,,,,,,,,,,,,,,,,:;;#`
 #:,,,#n#,,,,;;,,,,:#+,,,,,,,,,,,,:i#z#*;:,,,,,,,,,,,,,,,,,,,,,,,,z`                                                 ,#:,,,,,,,,,,,,,,,,,,,,,,,,:;;**
`#,,,:zz;,,,,,,,,,:zi,,,,,,,,,,,;+z+;:,,,,,,,,,,,,,,,,,,,,,,,,,,,:#                                                 ,#:,,,,,,,,,,,,,,,,,,,,,,,,:;;*z`
:*,,,,i;,,,,,,,,,:z;,,,,,,,,,:iz#;,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,*;                                                `#:,,,,,,,,,,,,,,,,,,,,,,,:;;;zM,
i;,,,,,,,,,,,,,,:z;,,,,,,,,,*z+:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,z`                                                +;,,,,,,,,,,,,,,,,,,,,,,,:;;;#Mi
*:,,,,,,,,,,,,,,#i,,,,,,,,iz*:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,;*                                                ;*,,,,,,,,,,,,,,,,,,,,,,:;;;;*Wi
#*,,,,,,,,,,,,,i+,,,,,,,:##:,,,,,,,;+####+;,,,,,,,,,,,,,,,,,,,,,#.                                                #:,,,,,,,,,,,,,,,,,,,,:;ii;;;zi
zz,,,,,,,,,,,,:#:,,,,,,iz;,,,,,,,:#+:,,,,;+#:,,,,,,,,,,,,,,,,,,i*                                                ,*,,,,,,,,,,,,,,,,,,::;+nxx*;#;
zz,,,,,,,,,,,,*i,,,,,,*#:,,,,,,,,#;........:#*,,,,,,,,,,,,,,,,:z`                                               .z:,,,,,,,,,,,,,,::;;;inn##x*z:
#*,,,,,,,,,,,,i,,,,,,++,,,,,,,,,i+..........,++:,,,,,,,,,,,,,,+;                                               :#+,,,,,,,,,,,,,::;;;;;zz+#xn#.
+;,,,,,,,,,,,,,,,,,,+*,,,,,,,,,,#,............i#,,,,,,,,,,,,,;#                                              `**;:,,,,,,,,,,,,:;;;;;;;xnnxn;
ii,,:i:,,,,,,,,,,,,+*,,,,,,,,,,:z..............i+,,,,,,,,,,,:#.                                             ,#;,,,,,,,,,,,,,,:;;;;;;;;i*z+`
:*,,ini,,,,,,,,,,,i+,,,,,,,,,,,;#...............**,,,,,,,,,,*i                                            `*+:,,,,,,,,,,,,,,:;;;;*#z#*#+.
.#,,+n*,,,,,,,,,,:z:,,,,,,,,,,,;#................#;,,,,,,,,;#                                            ,#i,,,,,,,,,,,,,,,:;;;inn#zx#,
`#,,+ni,,,,,,,,,,#;,,,,,,,,,,,,:#................,z:,,,,,,iz.                                          `*+:,,,,,,,,,,,,,,,,:;;;nzzn+.
 #:,;i:,,,,,,,,,;#,,,,,,,::::,,,#.................i*,,,,,,**                                          ,#i,,,,,,,,,,,,,:::,,:;;+Mzi`
 ii,,,,,,,,,,,,,#:,,,,,;##++##i:#,......,:.........#:,,,,,:#                                        `*+:,,,,,,,,,,,,,;####++++i.
 .#,,,,,,,,,,,,:#,,,,,*#,....,*z#i.....*nx;........;+,,,,,,*;   `:i++++i.                          :#;,,,,,,,,,,,,,;#*.
  #:,,,,,,,,,,,i*,,,,;#,.......,+n....,nxxz,.......,#:,,,,,,+.i++i;:,,,;++`                      `++:,,,,,,,,,,,,i#i`
  ;*,,,,,,,,,,,+;,,,,#:..........#;....zxxxi........ii,,,,,:##;,,,,,,,,,,;#`                    ;#;,,,,,,,,,,,,i#i`
  `#,,,,,,,,,,,::,,,:z...........:#....ixxxn,.......,#,,,,iz;,,,,,,,,,,,,,:#`                 .+*,,,,,,,,,,,,i#i`
   ii,,,,,,,,,,,,,,,:+............+:...,nxxx#,.......#:,,:i,,,,,,,,,,::::,,i;                ;+:,,,,,,,,,,:i#;`
   `#:,,,,,,,,,,,,,,:+............,#,...*xxxxi.......+;,,,,,,,,,,:i#####z#ii;              .+i,,,,,,,,,,,i#i`
    :+,,,,,,,,,,,,,,:+.............*i...,zxxxxi......ii,,,,,,,,;##*:,,,,,:*n#,`           i+:,,,,,,,,,,izi`
     +i,,,,,,,,,,,,,:#.............,#,...:nxxxx;.....ii,,,,,,:##;,,,,,,,,,,:;+##*;.`    .#i,,,,,,,,,,i#*`
     `#;,,,,,,,,,,,,,z......:;,.....;+....;xxxxx:....+;,,,,,iz;,,,,,,,,,,,,,,,,::i+##*;i#:,,,,,,,,,;#i`
      `#;,,,,,,,,,,,,#:....*xx*......+i....;nxxx:...,z,,,,:#+:,,,,,,,,,,,,,,,,,,,,,,,:i+z;,,,,,,,;#*`
       `+*:,,,,,,,,,,i*...,xxxx:.....,#;....:zx*....i*,,,:zi,,,,,,,,,,,,,,,,,,,,,,,,,,,,:z,,,,,;#*`
         ;#i,,,,,,,,,:z,...#xxxz,....ii#*....,:....:z:,,;z;,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,#,,,;#*`
          `i#+i;:::;iizi...:nxxx+,...#:,*#:.......:z:,,*#:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,:#,;#*`
             .;*++*i;:,#,...*xxxx*..,#,,,:##i,.,:+#:,,++:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,:#*#*`
                       ;*...,zxxxx*.:+,,,,,:*#nz+;,,:#*,,,,,,,,,:::;::::::::,,,,,,,,::;zM*`
                        +:...:nxxxx#ii,,,,,,,,i+,,,:z;,,,,,,,,:;;;;;;;;i**i;;;;;;;;;;in+.
                        `#,...;nxxxxx;,,,,,,,,,z;,;z;,,,,,,,,;;;;;;;;;zxnxxni;;;i#nz##,
                         .#,...:nxxxM:,,,,,,,,,:z*z:,,,,,,;+;;;iii;;;*n##++z+;;ixznz,
                          ,#,...,#xnx:,,,,,,,,,,*z:,,,,,,:z,z*znnnni;*x###nxi;;zxz;
                           .#:....;,#:,,,,,,,,,*+,,,,,,,:#, `*x##+#xi;*zzz+ii+nx,
                            `+*,....z:,,,,,,,,++,,,,,,,,+:    ,xMnnM+*+++#znnn#n:
                             ,zz#++#x:,,,,,,:#*,,,,,,,,*nn+` ;xz##zznnnzz#######i
                            :#:,:;;:z:,,,,,:#i,,,,,,,,in##zn#n##################*
                           .#:,,,,,,z:,,,,:zi,,,,,,,,;xx####Mz#################zi
                          `#:,,,,,,,+;,,,:z;,,,,,,,,:z:*x####M#################n:
                          ;i,,,,,,,,**,,:z;,,,,,,,,:z;,,;n###zx##############n#.
                         `#,,,,,,,,;##,:z;,,,,,,,,,#i,,,,:n###x############zn:
                         :*,,,,,,:+#;z:z;,,,,,,,,,+*,,,,,,;n##zn#########nn;`
                         +:,,,,,:#i,,#z:,,,,,,,,,i+,,,,,,,,z###x#######nz;`
                         #,,,,,:z;,,:z;,,,,,,,,,;#:,,,,,,,,;Mn#x###n#nz:
                        `#,,,,:z:,,:z;,,,,,,,,,:z:,,,,,,,,,,nzxM###zM+
                        `#,,,,#;,,:z;,,,,,,,,,,#;,,,,,,,,,,,z##n#####ni
                        `#,,,i*,,:#;,,,,,,,,,,**,,,,,,,,,,,,+#########ni
                         #,,,:,,,+i,,,,,,,,,,;#,,,,,,,,,,,,,+##########n:
                         *:,,,,,**,,,,,,,,,,:#:,,,,,,,,,,,,,############n.
                         ,+,,,,;#,,,,,,,,,,,+i,,,,,,,,,,,,,,n#############
                          i#i;iz:,,,,,,,,,,;#,,,,,,,,,,,,,,;n############n:
                           .;*ni,,,,,,,,,,:#:,,,,,,,,,,,,,,z##############n`
                             .+,,,,,,,,,,,**,,,,,,,,,,,,,,*n##############z*
                             +:,,,,,,,,,,:nz:,,,,,,,,,,,,+n################n.
                            .+,,,,,,,,,,,##zz;,,,,,,,,,;zn##################+
                            *:,,,,,,,,,,;x###nz+;::::i#xz###################n,
                           `+,,,,,,,,,,:zz#####znnnxn;.,z####################+
                           :i,,,,,,,,,:#z########zni`   #####################x,
                           *:,,,,,,,,,+n########n+`     :n####################+
                           +:,,,,,,,:+n#######nz,       `n####################n`
                           zz:,,,,,inz######nz:          #####################z;
                           znn+ii+nn#####zn#,            i######################
                           ,zzznnz####znz*.              :z####################n`
                            `*znnnnnz+;.                 ,n####################n:
                               ....                      .n#####################*
                                                         .n#####################z
                                                         .n#####################n`
                                                         :z#####################n,
                                                         *z#####################z;
                                                         ########################+
                                                        `n#######################z
                                                        ,n#######################n
                                                        *########################n`
                                                        n########################x,
                                                       ,n########################n,
                                                       +#########################n:
                                                      `n#########################z;
                                                      ;z########znxxxxxxnzz######z;
                                                      z######nnz+i;:::::;*#nxz###z:
                                                     ,n###zxz;:,,,,,,,,,,,,,:*nn#n,
                                                     ,n#zx#:,,,,,,,,,,,,,,,,,,:*nn`
                                                      znz;,,,,,,,,,,,,,,,,,,,,,,;+
                                                      .#,,,,,,,,,,,,,,,,,,,,,,,,+:
                                                      .*,,,,,,,,,,,,,,,,,,,,,,,,+.
                                                      i;,,,,,,,,,,,,,,,,,,,,,,,,#
                                                     `#,,,,,,,,,,,,,,,,,,,,,,,,:+
                                                     ;i,,,,,,,,,,,,,,,,,,,,,,,,i:
                                                     #:,,,,,,,,,,,,,,,,,,,,,,,:z`
                                                    ,+,,,,,,,,,,,,,,,,,,,,,,,,z;
                                                    +:,,,,,,,,,,,,,,,,,,,,,,:#n`
                                                   .#,,,,:i,,,,,,,,,,,,,,,,:#i#
                                                   *;,,,,*ni,,,,,,,,i:,,,;iz;,#
                                                  `#,,,,:z:+#i:,,,,,#:,,,#*:,,+
                                                  i;,,,,**,,:+##z##*z,,,,#:,,,+
                                                 `+,,,,:z,,,,,,,#. `#,,,,#:,,,+
                                                 :;,,,,*i,,,,,,ii  ,*,,,,+:,,,:
                                                 .`````:```````.   `.``` `
*/

